<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹RPG</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Serif JP', sans-serif;
            overscroll-behavior: none;
        }
        .rpg-box {
            border: 2px solid #4a5568;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        .rpg-button {
            background-color: #2d3748;
            border: 1px solid #4a5568;
            transition: all 0.2s ease-in-out;
        }
        .rpg-button:hover {
            background-color: #4a5568;
            border-color: #718096;
            transform: translateY(-2px);
        }
        /* ç”»é¢ã®è¡¨ç¤ºãƒ»éè¡¨ç¤º */
        .screen {
            display: none;
            animation: fadeIn 0.5s;
        }
        .active-screen {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #2d3748;
        }
        ::-webkit-scrollbar-thumb {
            background: #718096;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a0aec0;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200">

    <!-- ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="confirmation-modal" class="fixed inset-0 bg-black bg-opacity-80 z-50 items-center justify-center hidden">
        <div class="bg-gray-800 p-8 rounded-lg shadow-xl max-w-md w-full rpg-box">
            <h2 id="confirmation-title" class="text-xl font-bold mb-4 text-yellow-400">ç¢ºèª</h2>
            <p id="confirmation-message" class="mb-6">æœ¬å½“ã«å®Ÿè¡Œã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚</p>
            <div class="flex justify-end gap-4">
                <button id="confirm-cancel-btn" class="rpg-button px-6 py-2 rounded-lg">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                <button id="confirm-ok-btn" class="bg-red-700 hover:bg-red-600 text-white px-6 py-2 rounded-lg">å®Ÿè¡Œ</button>
            </div>
        </div>
    </div>

    <!-- åˆå›èµ·å‹•ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="first-time-modal" class="fixed inset-0 bg-black bg-opacity-75 z-50 items-center justify-center hidden">
        <div class="bg-gray-800 p-8 rounded-lg shadow-xl max-w-lg w-full rpg-box">
            <div id="new-game-selection">
                <h2 class="text-2xl font-bold mb-4 text-yellow-400">ç‹å›½ã‚ˆã‚Š</h2>
                <p class="mb-6">ã‚ˆã†ã“ãã€æ–°ãŸãªã‚‹æ¢ç´¢è€…ã‚ˆã€‚ã“ã®ä¸–ç•Œã¯åºƒå¤§ã§ã€å¤šãã®è¬ã¨å±é™ºã«æº€ã¡ã¦ã„ã‚‹ã€‚å›ã®å†’é™ºãŒã€ã“ã®åœ°ã«æ–°ãŸãªå…‰ã‚’ã‚‚ãŸã‚‰ã™ã“ã¨ã‚’æœŸå¾…ã—ã¦ã„ã‚‹ã€‚</p>
                <p class="mb-4 font-semibold">æ±ã®è·æ¥­ã‚’é¸ã³ãŸã¾ãˆï¼š</p>
                <div class="flex gap-4 mb-6">
                    <button id="select-swordsman" class="rpg-button flex-1 p-4 rounded-lg text-lg">å‰£å£«</button>
                    <button id="select-mage" class="rpg-button flex-1 p-4 rounded-lg text-lg">é­”å°å£«</button>
                </div>
                <div class="text-center">
                    <button id="show-import-btn" class="text-cyan-400 hover:underline">ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ</button>
                </div>
            </div>
            <div id="import-game-section" class="hidden">
                 <h2 class="text-2xl font-bold mb-4 text-yellow-400">ãƒ‡ãƒ¼ã‚¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h2>
                 <p class="mb-4">ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãŸã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã‚’ä»¥ä¸‹ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚</p>
                 <textarea id="import-data-textarea" class="w-full h-40 bg-gray-900 text-white p-2 rounded border border-gray-600"></textarea>
                 <div class="flex justify-between items-center mt-4">
                    <button id="back-to-new-game-btn" class="text-cyan-400 hover:underline">æˆ»ã‚‹</button>
                    <div>
                        <span id="import-error" class="text-red-400 mr-4"></span>
                        <button id="import-data-btn" class="rpg-button px-6 py-2 rounded-lg">ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
                    </div>
                 </div>
            </div>
        </div>
    </div>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="container mx-auto p-4 max-w-4xl">
        
        <!-- ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢ -->
        <div id="main-menu-screen" class="screen active-screen">
            <div class="bg-gray-800 p-6 rounded-lg rpg-box">
                <h1 class="text-3xl font-bold text-center mb-6 border-b-2 border-gray-600 pb-3">ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼</h1>
                <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º -->
                <div id="status-display" class="mb-6 text-lg grid grid-cols-2 gap-x-4 gap-y-2">
                    <div>è·æ¥­: <span id="player-class" class="font-semibold text-cyan-400"></span></div>
                    <div>ãƒ¬ãƒ™ãƒ«: <span id="player-level" class="font-semibold text-green-400"></span></div>
                    <div>çµŒé¨“å€¤: <span id="player-exp" class="font-semibold text-green-400"></span></div>
                    <div>æ‰€æŒé‡‘: <span id="player-gold" class="font-semibold text-yellow-400"></span> G</div>
                </div>
                <!-- ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
                <nav class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <button data-screen="kingdom" class="p-4 rounded rpg-button text-lg">ç‹å›½</button>
                    <button data-screen="explore" class="p-4 rounded rpg-button text-lg">æ¢ç´¢</button>
                    <button data-screen="party" class="p-4 rounded rpg-button text-lg">ãƒ‘ãƒ¼ãƒ†ã‚£</button>
                    <button data-screen="items" class="p-4 rounded rpg-button text-lg">ã‚¢ã‚¤ãƒ†ãƒ </button>
                    <button data-screen="options" class="p-4 rounded rpg-button text-lg">ã‚ªãƒ—ã‚·ãƒ§ãƒ³</button>
                </nav>
            </div>
        </div>

        <!-- ç‹å›½ -->
        <div id="kingdom-screen" class="screen">
            <div class="bg-gray-800 p-6 rounded-lg rpg-box">
                <button data-screen="main-menu" class="rpg-button px-4 py-1 rounded mb-4">â† ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸æˆ»ã‚‹</button>
                <h2 class="text-2xl font-bold mb-4 border-b-2 border-gray-600 pb-2">ç‹å›½</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                    <button data-screen="guild" class="p-4 rounded rpg-button text-lg">æ¢ç´¢è€…å”ä¼š</button>
                    <button data-screen="blacksmith" class="p-4 rounded rpg-button text-lg">é›å†¶å±‹</button>
                    <button data-screen="general-store" class="p-4 rounded rpg-button text-lg">é›‘è²¨å±‹</button>
                    <button data-screen="ranch" class="p-4 rounded rpg-button text-lg">ç‰§å ´</button>
                </div>
            </div>
        </div>

        <!-- æ¢ç´¢è€…å”ä¼š -->
        <div id="guild-screen" class="screen">
            <div class="bg-gray-800 p-6 rounded-lg rpg-box">
                <button data-screen="kingdom" class="rpg-button px-4 py-1 rounded mb-4">â† ç‹å›½ã¸æˆ»ã‚‹</button>
                <h2 class="text-2xl font-bold mb-4">æ¢ç´¢è€…å”ä¼š</h2>
                <div class="flex gap-2 mb-4">
                    <button class="rpg-button px-4 py-2 rounded-t-lg" onclick="showTab('guild-tab-1', this)">æ¢ç´¢ã®å¿ƒå¾—</button>
                    <button class="rpg-button px-4 py-2 rounded-t-lg opacity-60" onclick="showTab('guild-tab-2', this)">æ¢ç´¢çŠ¶æ³</button>
                </div>
                <div id="guild-tab-1" class="guild-tab p-4 bg-gray-900 rounded-b-lg rounded-r-lg">
                    <h3 class="text-xl font-semibold mb-2 text-yellow-300">ã‚ˆã†ã€æ–°äººï¼ä¿ºãŒæ¢ç´¢ã®ã‚¤ãƒ­ãƒã‚’æ•™ãˆã¦ã‚„ã‚‹ã€‚</h3>
                    <div class="space-y-4">
                        <div>
                            <h4 class="text-lg font-bold">æ¢ç´¢ã«ã¤ã„ã¦</h4>
                            <p>ã€Œæ¢ç´¢ã€ã‹ã‚‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’é¸ã‚“ã§å†’é™ºã«å‡ºã‚‹ã‚“ã ã€‚ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã‚’å€’ã—ã¦çµŒé¨“å€¤ã‚„ç´ æã€é‡‘ã‚’æ‰‹ã«å…¥ã‚Œã‚ã€‚ãƒ¬ãƒ™ãƒ«ãŒä¸ŠãŒã‚Œã°ã€ã‚‚ã£ã¨å¼·ããªã‚Œã‚‹ãœã€‚</p>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold">è£…å‚™ã®é‡è¦æ€§</h4>
                            <p>ã€Œé›å†¶å±‹ã€ã§æ–°ã—ã„è£…å‚™ã‚’è²·ã£ãŸã‚Šã€ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã®ç´ æã§ç‰¹åˆ¥ãªè£…å‚™ã‚’ä½œã£ãŸã‚Šã§ãã‚‹ã€‚è‰¯ã„è£…å‚™ã¯ã‚ã‚“ãŸã®å‘½ã‚’å®ˆã‚‹ã€‚é‡‘ã‚„ç´ æã‚’æƒœã—ã‚€ãªã‚ˆã€‚</p>
                        </div>
                        <div>
                            <h4 class="text-lg font-bold">ã‚¢ã‚¤ãƒ†ãƒ ã‚’æ´»ç”¨ã—ã‚</h4>
                            <p>ã€Œé›‘è²¨å±‹ã€ã§ã¯å›å¾©è–¬ãªã‚“ã‹ã®ä¾¿åˆ©ãªã‚‚ã®ãŒæ‰‹ã«å…¥ã‚‹ã€‚æ¢ç´¢ã«è¡Œãå‰ã«ã¯æº–å‚™ã‚’ä¸‡ç«¯ã«ã—ã¦ãŠã‘ã€‚æŒã£ã¦ã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã¯ã€Œã‚¢ã‚¤ãƒ†ãƒ ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ç¢ºèªã§ãã‚‹ãã€‚</p>
                        </div>
                         <div>
                            <h4 class="text-lg font-bold">ä»²é–“ã¨å”åŠ›ã </h4>
                            <p>å†’é™ºã¯ä¸€äººã˜ã‚ƒãªã„ã€‚ã€Œãƒ‘ãƒ¼ãƒ†ã‚£ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ä»²é–“ã®æ§˜å­ã‚’ç¢ºèªã—ãŸã‚Šã€è£…å‚™ã‚’å¤‰ãˆã¦ã‚„ã£ãŸã‚Šã§ãã‚‹ã€‚é ¼ã‚Šã«ãªã‚‹ä»²é–“ãŒã„ã‚Œã°ç™¾äººåŠ›ã ã€‚</p>
                        </div>
                    </div>
                </div>
                <div id="guild-tab-2" class="guild-tab hidden p-4 bg-gray-900 rounded-b-lg rounded-r-lg">
                    <h3 class="text-xl font-semibold mb-2">å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æ¢ç´¢çŠ¶æ³</h3>
                    <div id="field-progress-container" class="space-y-4">
                        <!-- JSã§æ¢ç´¢çŠ¶æ³ã‚’ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- é›å†¶å±‹ -->
        <div id="blacksmith-screen" class="screen">
            <div class="bg-gray-800 p-6 rounded-lg rpg-box">
                <button data-screen="kingdom" class="rpg-button px-4 py-1 rounded mb-4">â† ç‹å›½ã¸æˆ»ã‚‹</button>
                <h2 class="text-2xl font-bold mb-4">é›å†¶å±‹</h2>
                <p class="italic bg-gray-900 p-3 rounded-md mb-4">ã€Œã¸ã„ã€ã„ã‚‰ã£ã—ã‚ƒã„ï¼ã€€ã‚¦ãƒã®æ­¦å…·ã¯ä¸€ç´šå“ã ãœã€‚è¦‹ã¦ã„ããªï¼ã€</p>
                <div class="flex gap-2 mb-4">
                    <button class="rpg-button px-4 py-2 rounded-t-lg" onclick="showTab('blacksmith-tab-1', this)">è³¼å…¥</button>
                    <button class="rpg-button px-4 py-2 rounded-t-lg opacity-60" onclick="showTab('blacksmith-tab-2', this)">ä½œæˆ</button>
                </div>
                <div id="blacksmith-tab-1" class="blacksmith-tab p-4 bg-gray-900 rounded-b-lg rounded-r-lg">
                    <h3 class="text-xl font-semibold mb-2">è³¼å…¥å¯èƒ½ãªè£…å‚™</h3>
                    <div id="blacksmith-purchase-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- JSã§ãƒªã‚¹ãƒˆã‚’ç”Ÿæˆ -->
                    </div>
                </div>
                <div id="blacksmith-tab-2" class="blacksmith-tab hidden p-4 bg-gray-900 rounded-b-lg rounded-r-lg">
                    <h3 class="text-xl font-semibold mb-2">ä½œæˆå¯èƒ½ãªè£…å‚™</h3>
                    <div id="blacksmith-craft-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- JSã§ãƒªã‚¹ãƒˆã‚’ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- é›‘è²¨å±‹ -->
        <div id="general-store-screen" class="screen">
            <div class="bg-gray-800 p-6 rounded-lg rpg-box">
                <button data-screen="kingdom" class="rpg-button px-4 py-1 rounded mb-4">â† ç‹å›½ã¸æˆ»ã‚‹</button>
                <h2 class="text-2xl font-bold mb-4">é›‘è²¨å±‹</h2>
                <p class="italic bg-gray-900 p-3 rounded-md mb-4">ã€Œã‚ã‚‰ã€ã„ã‚‰ã£ã—ã‚ƒã„ã€‚å†’é™ºã«å½¹ç«‹ã¤ã‚‚ã®ã‚’æƒãˆã¦ã‚‹ã‚ã‚ˆã€‚ã‚†ã£ãã‚Šè¦‹ã¦ã„ã£ã¦ã­ã€‚ã€</p>
                <div class="flex gap-2 mb-4">
                    <button class="rpg-button px-4 py-2 rounded-t-lg" onclick="showTab('store-tab-1', this)">è³¼å…¥</button>
                    <button class="rpg-button px-4 py-2 rounded-t-lg opacity-60" onclick="showTab('store-tab-2', this)">å£²å´</button>
                </div>
                <div id="store-tab-1" class="store-tab p-4 bg-gray-900 rounded-b-lg rounded-r-lg">
                    <h3 class="text-xl font-semibold mb-2">å•†å“ãƒªã‚¹ãƒˆ</h3>
                    <div id="store-purchase-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- JSã§ãƒªã‚¹ãƒˆã‚’ç”Ÿæˆ -->
                    </div>
                </div>
                <div id="store-tab-2" class="store-tab hidden p-4 bg-gray-900 rounded-b-lg rounded-r-lg">
                    <h3 class="text-xl font-semibold mb-2">æ‰€æŒã‚¢ã‚¤ãƒ†ãƒ ã‚’å£²å´</h3>
                    <div id="store-sell-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- JSã§ãƒªã‚¹ãƒˆã‚’ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ç‰§å ´ -->
        <div id="ranch-screen" class="screen">
            <div class="bg-gray-800 p-6 rounded-lg rpg-box">
                <button data-screen="kingdom" class="rpg-button px-4 py-1 rounded mb-4">â† ç‹å›½ã¸æˆ»ã‚‹</button>
                <h2 class="text-2xl font-bold mb-4">ç‰§å ´</h2>
                <p class="italic bg-gray-900 p-3 rounded-md mb-4">ã€Œã‚„ã‚ã€ã‚ˆãæ¥ãŸã­ã€‚ã“ã“ã¯å‹•ç‰©ãŸã¡ã¨ã®ã©ã‹ãªæ™‚é–“ã‚’éã”ã›ã‚‹å ´æ‰€ã•ã€‚ä»Šã¯ã¾ã æº–å‚™ä¸­ã ã‘ã©ã€æ¥½ã—ã¿ã«ã—ã¦ã¦ãã‚Œã‚ˆãªï¼ã€</p>
                <p class="text-center text-2xl mt-12 text-yellow-400">ğŸš§ ç¾åœ¨å®Ÿè£…ä¸­ã§ã™ ğŸš§</p>
            </div>
        </div>

        <!-- æ¢ç´¢ -->
        <div id="explore-screen" class="screen">
            <div class="bg-gray-800 p-6 rounded-lg rpg-box">
                <button data-screen="main-menu" class="rpg-button px-4 py-1 rounded mb-4">â† ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸æˆ»ã‚‹</button>
                <h2 class="text-2xl font-bold mb-4">æ¢ç´¢</h2>
                <div id="explore-field-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- JSã§æ¢ç´¢å¯èƒ½ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ç”Ÿæˆ -->
                </div>
            </div>
        </div>

        <!-- ãƒ‘ãƒ¼ãƒ†ã‚£ -->
        <div id="party-screen" class="screen">
            <div class="bg-gray-800 p-6 rounded-lg rpg-box">
                <button data-screen="main-menu" class="rpg-button px-4 py-1 rounded mb-4">â† ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸æˆ»ã‚‹</button>
                <h2 class="text-2xl font-bold mb-4">ãƒ‘ãƒ¼ãƒ†ã‚£</h2>
                <p class="text-center text-2xl mt-12 text-yellow-400">ğŸš§ ç¾åœ¨å®Ÿè£…ä¸­ã§ã™ ğŸš§</p>
            </div>
        </div>

        <!-- ã‚¢ã‚¤ãƒ†ãƒ  -->
        <div id="items-screen" class="screen">
            <div class="bg-gray-800 p-6 rounded-lg rpg-box">
                <button data-screen="main-menu" class="rpg-button px-4 py-1 rounded mb-4">â† ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸æˆ»ã‚‹</button>
                <h2 class="text-2xl font-bold mb-4">ã‚¢ã‚¤ãƒ†ãƒ </h2>
                <p class="text-center text-2xl mt-12 text-yellow-400">ğŸš§ ç¾åœ¨å®Ÿè£…ä¸­ã§ã™ ğŸš§</p>
            </div>
        </div>

        <!-- ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
        <div id="options-screen" class="screen">
            <div class="bg-gray-800 p-6 rounded-lg rpg-box">
                <button data-screen="main-menu" class="rpg-button px-4 py-1 rounded mb-4">â† ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸æˆ»ã‚‹</button>
                <h2 class="text-2xl font-bold mb-4">ã‚ªãƒ—ã‚·ãƒ§ãƒ³</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                    <button data-screen="monster-book" class="p-4 rounded rpg-button text-lg">ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼å›³é‘‘</button>
                    <button data-screen="export-data" class="p-4 rounded rpg-button text-lg">ãƒ‡ãƒ¼ã‚¿ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
                    <button id="reset-data-btn" class="p-4 rounded bg-red-800 hover:bg-red-700 text-lg">ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã®ãƒªã‚»ãƒƒãƒˆ</button>
                </div>
            </div>
        </div>

        <!-- ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼å›³é‘‘ -->
        <div id="monster-book-screen" class="screen">
            <div class="bg-gray-800 p-6 rounded-lg rpg-box">
                <button data-screen="options" class="rpg-button px-4 py-1 rounded mb-4">â† ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¸æˆ»ã‚‹</button>
                <h2 class="text-2xl font-bold mb-4">ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼å›³é‘‘</h2>
                <div id="monster-list" class="grid grid-cols-1 md:grid-cols-2 gap-4 max-h-[60vh] overflow-y-auto pr-2">
                    <!-- JSã§å›³é‘‘ã‚’ç”Ÿæˆ -->
                </div>
            </div>
        </div>
        
        <!-- ãƒ‡ãƒ¼ã‚¿ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ -->
        <div id="export-data-screen" class="screen">
            <div class="bg-gray-800 p-6 rounded-lg rpg-box">
                <button data-screen="options" class="rpg-button px-4 py-1 rounded mb-4">â† ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¸æˆ»ã‚‹</button>
                <h2 class="text-2xl font-bold mb-4">ãƒ‡ãƒ¼ã‚¿ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</h2>
                <p class="mb-4">ä»¥ä¸‹ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã€åˆ¥ã®å ´æ‰€ã«ä¿å­˜ã—ã¦ãã ã•ã„ã€‚ãƒ‡ãƒ¼ã‚¿ã‚’å¾©å…ƒã™ã‚‹éš›ã«ä½¿ç”¨ã—ã¾ã™ã€‚</p>
                <textarea id="export-data-textarea" readonly class="w-full h-64 bg-gray-900 text-white p-2 rounded border border-gray-600"></textarea>
                <button id="copy-data-button" class="rpg-button px-6 py-2 rounded mt-4">ã‚³ãƒ”ãƒ¼</button>
                <span id="copy-feedback" class="ml-4 text-green-400 opacity-0 transition-opacity">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼</span>
            </div>
        </div>
    </div>

<script>
// =================================================================================
// ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
// ã‚²ãƒ¼ãƒ å†…ã®ã‚¢ã‚¤ãƒ†ãƒ ã€ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã€ãƒ¬ã‚·ãƒ”ãªã©ã®é™çš„ãƒ‡ãƒ¼ã‚¿ã‚’å®šç¾©ã—ã¾ã™ã€‚
// æ–°ã—ã„è¦ç´ ã‚’è¿½åŠ ã™ã‚‹éš›ã¯ã€ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†ã—ã¦ãã ã•ã„ã€‚
// =================================================================================
const DB = {
    items: {
        'weapon001': { name: 'éŠ…ã®å‰£', type: 'weapon', price: 120, sellPrice: 60, description: 'ã‚ã‚Šãµã‚ŒãŸéŠ…è£½ã®å‰£ã€‚', stats: { atk: 5 } },
        'weapon002': { name: 'é‰„ã®å‰£', type: 'weapon', price: 500, sellPrice: 250, description: 'éŠ…ã®å‰£ã‚ˆã‚Šä¸ˆå¤«ã§åˆ‡ã‚Œå‘³ãŒã„ã„ã€‚', stats: { atk: 12 } },
        'weapon101': { name: 'åˆå¿ƒè€…ã®æ–', type: 'weapon', price: 100, sellPrice: 50, description: 'é­”åŠ›ã®è¾¼ã‚ã‚‰ã‚ŒãŸæ¨«ã®æ–ã€‚', stats: { matk: 6 } },
        'armor001': { name: 'çš®ã®æœ', type: 'body', price: 80, sellPrice: 40, description: 'å‹•ç‰©ã®çš®ã§ä½œã‚‰ã‚ŒãŸç°¡å˜ãªæœã€‚', stats: { def: 4 } },
        'item001': { name: 'è–¬è‰', type: 'consumable', price: 20, sellPrice: 10, description: 'HPã‚’å°‘ã—å›å¾©ã™ã‚‹ã€‚' },
        'item002': { name: 'é­”åŠ›æ°´', type: 'consumable', price: 50, sellPrice: 25, description: 'MPã‚’å°‘ã—å›å¾©ã™ã‚‹ã€‚' },
        'material001': { name: 'ãƒ¯ãƒ¼ãƒ ã®ç²˜æ¶²', type: 'material', sellPrice: 5, description: 'ãƒ¯ãƒ¼ãƒ ã‹ã‚‰æ¡ã‚Œã‚‹ãƒãƒãƒãƒã—ãŸæ¶²ä½“ã€‚' },
        'material002': { name: 'ã‚´ãƒ–ãƒªãƒ³ã®æ£æ£’', type: 'material', sellPrice: 12, description: 'ã‚´ãƒ–ãƒªãƒ³ãŒä½¿ã£ã¦ã„ãŸç²—æœ«ãªæ£æ£’ã€‚' },
    },
    monsters: {
        'worm': { no: 1, name: 'ãƒ¯ãƒ¼ãƒ ', race: 'èŸ²æ—', habitat: 'å¹³åŸã€æ´çªŸ', story: 'åœŸã®ä¸­ã«ç”Ÿæ¯ã™ã‚‹å¤§å‹ã®ãƒŸãƒŸã‚ºã®ã‚ˆã†ãªãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã€‚ç‰¹ã«æ¯’ã¯ãªã„ãŒã€ãã®ç²˜æ¶²ã¯æ§˜ã€…ãªè–¬å“ã®ææ–™ã«ãªã‚‹ã€‚' },
        'titan_worm': { no: 2, name: 'ã‚¿ã‚¤ã‚¿ãƒ³ãƒ¯ãƒ¼ãƒ ', race: 'èŸ²æ—', habitat: 'æ±šæŸ“ã•ã‚ŒãŸåœŸåœ°', story: 'ãƒ¯ãƒ¼ãƒ ãŒå·¨å¤§åŒ–ã—ãŸäºœç¨®ã€‚å¼·é­ãªå¤–çš®ã‚’æŒã¡ã€ä¸¦å¤§æŠµã®æ”»æ’ƒã§ã¯å‚·ä¸€ã¤ã¤ã‹ãªã„ã¨è¨€ã‚ã‚Œã¦ã„ã‚‹ã€‚' },
        'harpy': { no: 3, name: 'ãƒãƒ¼ãƒ”ã‚£', race: 'é³¥äººæ—', habitat: 'å±±å²³åœ°å¸¯', story: 'å¥³æ€§ã®é¡”ã¨é³¥ã®ä½“ã‚’æŒã¤ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã€‚ãã®æ­Œå£°ã¯èˆ¹ä¹—ã‚Šã‚’æƒ‘ã‚ã›ã‚‹ã¨ã„ã†è¨€ã„ä¼ãˆãŒã‚ã‚‹ã€‚' },
        'goblin': { no: 4, name: 'ã‚´ãƒ–ãƒªãƒ³', race: 'äºœäººæ—', habitat: 'æ£®ã€æ´çªŸ', story: 'çŸ¥èƒ½ã¯ä½ã„ãŒã€é›†å›£ã§è¡Œå‹•ã™ã‚‹å„ä»‹ãªãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã€‚æ‰‹è£½ã®æ£æ£’ã§è¥²ã„ã‹ã‹ã£ã¦ãã‚‹ã€‚' },
        'goblin_archer': { no: 5, name: 'ã‚´ãƒ–ãƒªãƒ³ã‚¢ãƒ¼ãƒãƒ£ãƒ¼', race: 'äºœäººæ—', habitat: 'æ£®', story: 'å¼“çŸ¢ã®æ‰±ã„ã‚’è¦šãˆãŸã‚´ãƒ–ãƒªãƒ³ã€‚å¾Œæ–¹ã‹ã‚‰ã®æ”¯æ´å°„æ’ƒã¯ã€å˜ç´”ãªãŒã‚‰ã‚‚è„…å¨ã¨ãªã‚‹ã€‚' },
        'goblin_mage': { no: 6, name: 'ã‚´ãƒ–ãƒªãƒ³ãƒ¡ã‚¤ã‚¸', race: 'äºœäººæ—', habitat: 'å¤ä»£éºè·¡', story: 'ã‚´ãƒ–ãƒªãƒ³ã®ä¸­ã§ã‚‚ç‰¹ã«çŸ¥èƒ½ã®é«˜ã„å€‹ä½“ã€‚åˆæ­©çš„ãªé­”æ³•ã‚’æ“ã‚Šã€ç«ã®ç‰ãªã©ã‚’æ”¾ã£ã¦ãã‚‹ã€‚' },
        'mega_goblin': { no: 7, name: 'ãƒ¡ã‚¬ã‚´ãƒ–ãƒªãƒ³', race: 'äºœäººæ—', habitat: 'ã‚´ãƒ–ãƒªãƒ³ã®å·£', story: 'ã‚´ãƒ–ãƒªãƒ³ã®ç‹ã¨ã‚‚å‘¼ã°ã‚Œã‚‹å·¨å¤§ãªå€‹ä½“ã€‚ãã®æ€ªåŠ›ã¯å²©ã‚’ã‚‚ç •ãã¨æã‚Œã‚‰ã‚Œã¦ã„ã‚‹ã€‚' },
        'unknown008': { no: 8, name: 'ï¼Ÿï¼Ÿï¼Ÿ', race: 'ï¼Ÿï¼Ÿï¼Ÿ', habitat: 'ï¼Ÿï¼Ÿï¼Ÿ', story: 'æœªç¢ºèªã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã€‚' },
        'unknown009': { no: 9, name: 'ï¼Ÿï¼Ÿï¼Ÿ', race: 'ï¼Ÿï¼Ÿï¼Ÿ', habitat: 'ï¼Ÿï¼Ÿï¼Ÿ', story: 'æœªç¢ºèªã®ãƒ¢ãƒ³ã‚¹ã‚¿ãƒ¼ã€‚' },
    },
    fields: {
        'hearts_plain': { name: 'ãƒãƒ¼ãƒ„å¹³åŸ' },
        'misty_forest': { name: 'éœ§ã®æ£®' },
    },
    blacksmithPurchaseConditions: [
        { itemId: 'weapon001', condition: (gameData) => true },
        { itemId: 'armor001', condition: (gameData) => true },
        { itemId: 'weapon002', condition: (gameData) => gameData.player.level >= 5 },
    ],
    blacksmithCraftRecipes: [
        {
            itemId: 'weapon002',
            materials: [{ id: 'material002', quantity: 5 }, { id: 'material001', quantity: 10 }],
            condition: (gameData) => gameData.items.some(item => item.id === 'material002')
        }
    ],
    generalStorePurchaseConditions: [
        { itemId: 'item001', condition: (gameData) => true },
        { itemId: 'item002', condition: (gameData) => gameData.player.class === 'é­”å°å£«' || gameData.player.level >= 3 },
    ],
};

// =================================================================================
// ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯
// =================================================================================
let gameData;

// --- ã‚²ãƒ¼ãƒ ã®åˆæœŸåŒ–ã¨ã‚»ãƒ¼ãƒ–/ãƒ­ãƒ¼ãƒ‰ ---
window.onload = function() {
    loadGame();
    setupEventListeners();
    if (gameData) {
        renderAll();
        switchScreen('main-menu');
    }
};

function loadGame() {
    const savedData = localStorage.getItem('textRpgGameData');
    if (savedData) {
        gameData = JSON.parse(savedData);
    } else {
        document.getElementById('first-time-modal').style.display = 'flex';
    }
}

function saveGame() {
    if (gameData) {
        localStorage.setItem('textRpgGameData', JSON.stringify(gameData));
    }
}

function initNewGame(playerClass) {
    gameData = {
        player: {
            class: playerClass,
            level: 1,
            exp: 0,
            nextExp: 100,
            equipment: { weapon: null, head: null, body: null, legs: null, accessory: null },
        },
        party: [],
        gold: 200,
        items: [{ id: 'item001', quantity: 3 }],
        unlockedFields: ['hearts_plain'],
        fieldProgress: {
            'hearts_plain': { monsterCompletion: 0, itemCompletion: 0, mapCompletion: 0, overall: 0, rewardClaimed: false },
        },
        monsterLog: {},
    };
    Object.keys(DB.monsters).forEach(id => {
        if (!id.startsWith('unknown')) {
            gameData.monsterLog[id] = { discovered: true };
        }
    });
    saveGame();
    document.getElementById('first-time-modal').style.display = 'none';
    renderAll();
    switchScreen('main-menu');
}

function importGame() {
    const jsonString = document.getElementById('import-data-textarea').value;
    const errorSpan = document.getElementById('import-error');
    errorSpan.textContent = '';
    try {
        const importedData = JSON.parse(jsonString);
        // ç°¡å˜ãªãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
        if (importedData && importedData.player && importedData.player.class) {
            gameData = importedData;
            saveGame();
            document.getElementById('first-time-modal').style.display = 'none';
            renderAll();
            switchScreen('main-menu');
        } else {
            throw new Error('ç„¡åŠ¹ãªãƒ‡ãƒ¼ã‚¿å½¢å¼ã§ã™ã€‚');
        }
    } catch (e) {
        errorSpan.textContent = e.message;
    }
}

function resetGameData() {
    showConfirmation('æœ¬å½“ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ', 'ã™ã¹ã¦ã®ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ãŒå‰Šé™¤ã•ã‚Œã¾ã™ã€‚', () => {
        localStorage.removeItem('textRpgGameData');
        location.reload();
    });
}

// --- UIæç”»é–¢é€£ ---
function renderAll() {
    if (!gameData) return;
    renderStatus();
    renderScreens();
}

function renderStatus() {
    document.getElementById('player-class').textContent = gameData.player.class;
    document.getElementById('player-level').textContent = gameData.player.level;
    document.getElementById('player-exp').textContent = `${gameData.player.exp} / ${gameData.player.nextExp}`;
    document.getElementById('player-gold').textContent = gameData.gold;
}

function renderScreens() {
    renderGuild();
    renderBlacksmith();
    renderGeneralStore();
    renderExplore();
    renderMonsterBook();
    renderExportData();
}

function switchScreen(screenId) {
    document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.remove('active-screen');
    });
    const targetScreen = document.getElementById(screenId + '-screen');
    if (targetScreen) {
        targetScreen.classList.add('active-screen');
    }
}

function showTab(tabId, clickedButton) {
    const tabContainer = clickedButton.parentElement.nextElementSibling;
    while (!tabContainer.classList.contains('guild-tab') && !tabContainer.classList.contains('blacksmith-tab') && !tabContainer.classList.contains('store-tab')) {
        tabContainer = tabContainer.nextElementSibling;
    }
    
    const tabPrefix = tabId.substring(0, tabId.indexOf('-tab-'));
    
    // åŒã˜ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆ
    clickedButton.parentElement.querySelectorAll('button').forEach(btn => {
        btn.classList.add('opacity-60');
    });
    // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
    clickedButton.classList.remove('opacity-60');

    // åŒã˜ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éè¡¨ç¤ºã«
    let currentElement = clickedButton.parentElement.nextElementSibling;
    while(currentElement && currentElement.classList.contains(`${tabPrefix}-tab`)){
        currentElement.style.display = 'none';
        currentElement = currentElement.nextElementSibling;
    }
    
    // å¯¾è±¡ã®ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
    document.getElementById(tabId).style.display = 'block';
}


function showConfirmation(title, message, onConfirm) {
    const modal = document.getElementById('confirmation-modal');
    document.getElementById('confirmation-title').textContent = title;
    document.getElementById('confirmation-message').textContent = message;
    modal.style.display = 'flex';

    const okBtn = document.getElementById('confirm-ok-btn');
    const cancelBtn = document.getElementById('confirm-cancel-btn');

    const okHandler = () => {
        onConfirm();
        cleanup();
    };

    const cancelHandler = () => {
        cleanup();
    };
    
    function cleanup() {
        modal.style.display = 'none';
        okBtn.removeEventListener('click', okHandler);
        cancelBtn.removeEventListener('click', cancelHandler);
    }

    okBtn.addEventListener('click', okHandler, { once: true });
    cancelBtn.addEventListener('click', cancelHandler, { once: true });
}


// å„ç”»é¢ã®æç”»é–¢æ•°
function renderGuild() {
    const container = document.getElementById('field-progress-container');
    container.innerHTML = '';
    gameData.unlockedFields.forEach(fieldId => {
        const fieldInfo = DB.fields[fieldId];
        const progress = gameData.fieldProgress[fieldId];
        if (!fieldInfo || !progress) return;

        progress.overall = Math.floor((progress.monsterCompletion + progress.itemCompletion + progress.mapCompletion) / 3);

        const element = document.createElement('div');
        element.className = 'bg-gray-800 p-4 rounded';
        element.innerHTML = `
            <h4 class="text-lg font-bold">${fieldInfo.name}</h4>
            <div class="space-y-1 mt-2">
                <p>ç·åˆé”æˆåº¦: ${progress.overall}%</p>
                <p class="text-sm text-gray-400">å›³é‘‘: ${progress.monsterCompletion}% | ã‚¢ã‚¤ãƒ†ãƒ : ${progress.itemCompletion}% | ãƒãƒƒãƒ—: ${progress.mapCompletion}%</p>
            </div>
            <button class="rpg-button px-4 py-1 mt-2 rounded ${progress.overall === 100 && !progress.rewardClaimed ? '' : 'opacity-50 cursor-not-allowed'}" ${progress.overall === 100 && !progress.rewardClaimed ? '' : 'disabled'}>
                ${progress.rewardClaimed ? 'å ±é…¬å—å–æ¸ˆ' : '100%å ±é…¬'}
            </button>
        `;
        container.appendChild(element);
    });
}

function renderBlacksmith() {
    const purchaseContainer = document.getElementById('blacksmith-purchase-list');
    purchaseContainer.innerHTML = '';
    DB.blacksmithPurchaseConditions.forEach(cond => {
        if (cond.condition(gameData)) {
            const item = DB.items[cond.itemId];
            const element = document.createElement('div');
            element.className = 'bg-gray-700 p-3 rounded flex justify-between items-center';
            element.innerHTML = `
                <div>
                    <p class="font-semibold">${item.name}</p>
                    <p class="text-sm text-gray-400">${item.description}</p>
                </div>
                <button class="rpg-button px-4 py-2 rounded">${item.price} G</button>
            `;
            purchaseContainer.appendChild(element);
        }
    });

    const craftContainer = document.getElementById('blacksmith-craft-list');
    craftContainer.innerHTML = '';
    DB.blacksmithCraftRecipes.forEach(recipe => {
        if (recipe.condition(gameData)) {
            const item = DB.items[recipe.itemId];
            const materialsHtml = recipe.materials.map(mat => {
                const matItem = DB.items[mat.id];
                const userMat = gameData.items.find(i => i.id === mat.id) || { quantity: 0 };
                const color = userMat.quantity >= mat.quantity ? 'text-green-400' : 'text-red-400';
                return `<span class="${color}">${matItem.name} (${userMat.quantity}/${mat.quantity})</span>`;
            }).join(', ');

            const element = document.createElement('div');
            element.className = 'bg-gray-700 p-3 rounded';
            element.innerHTML = `
                <p class="font-semibold">${item.name}</p>
                <p class="text-sm text-gray-400">å¿…è¦ç´ æ: ${materialsHtml}</p>
                <button class="rpg-button px-4 py-2 rounded mt-2">ä½œæˆ</button>
            `;
            craftContainer.appendChild(element);
        }
    });
}

function renderGeneralStore() {
    const purchaseContainer = document.getElementById('store-purchase-list');
    purchaseContainer.innerHTML = '';
    DB.generalStorePurchaseConditions.forEach(cond => {
        if (cond.condition(gameData)) {
            const item = DB.items[cond.itemId];
            const element = document.createElement('div');
            element.className = 'bg-gray-700 p-3 rounded flex justify-between items-center';
            element.innerHTML = `
                <div>
                    <p class="font-semibold">${item.name}</p>
                    <p class="text-sm text-gray-400">${item.description}</p>
                </div>
                <button class="rpg-button px-4 py-2 rounded">${item.price} G</button>
            `;
            purchaseContainer.appendChild(element);
        }
    });
    const sellContainer = document.getElementById('store-sell-list');
    sellContainer.innerHTML = 'ç¾åœ¨ã€å£²å´ã§ãã‚‹ã‚¢ã‚¤ãƒ†ãƒ ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚';
}

function renderExplore() {
    const container = document.getElementById('explore-field-list');
    container.innerHTML = '';
    gameData.unlockedFields.forEach(fieldId => {
        const fieldInfo = DB.fields[fieldId];
        if (!fieldInfo) return;
        const element = document.createElement('button');
        element.className = 'p-6 rounded rpg-button text-xl text-center';
        element.textContent = fieldInfo.name;
        container.appendChild(element);
    });
}

function renderMonsterBook() {
    const container = document.getElementById('monster-list');
    container.innerHTML = '';
    Object.entries(DB.monsters).forEach(([id, monster]) => {
        const isDiscovered = gameData.monsterLog[id]?.discovered || false;
        const element = document.createElement('div');
        element.className = `p-4 rounded ${isDiscovered ? 'bg-gray-700' : 'bg-gray-800 border border-dashed border-gray-600'}`;
        if (isDiscovered) {
            element.innerHTML = `
                <h3 class="text-lg font-bold text-yellow-300">No.${monster.no} ${monster.name}</h3>
                <p class="text-sm">ç¨®æ—: ${monster.race}</p>
                <p class="text-sm">ç”Ÿæ¯åœ°: ${monster.habitat}</p>
                <p class="mt-2 text-gray-300 text-sm italic">"${monster.story}"</p>
            `;
        } else {
            element.innerHTML = `
                <h3 class="text-lg font-bold text-gray-500">No.${monster.no} ï¼Ÿï¼Ÿï¼Ÿ</h3>
                <p class="text-sm text-gray-500">ç¨®æ—: ï¼Ÿï¼Ÿï¼Ÿ</p>
                <p class="text-sm text-gray-500">ç”Ÿæ¯åœ°: ï¼Ÿï¼Ÿï¼Ÿ</p>
            `;
        }
        container.appendChild(element);
    });
}

function renderExportData() {
    const textarea = document.getElementById('export-data-textarea');
    textarea.value = JSON.stringify(gameData, null, 2);
}

// --- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ ---
function setupEventListeners() {
    // åˆå›èµ·å‹•
    document.getElementById('select-swordsman').addEventListener('click', () => initNewGame('å‰£å£«'));
    document.getElementById('select-mage').addEventListener('click', () => initNewGame('é­”å°å£«'));
    document.getElementById('show-import-btn').addEventListener('click', () => {
        document.getElementById('new-game-selection').style.display = 'none';
        document.getElementById('import-game-section').style.display = 'block';
    });
    document.getElementById('back-to-new-game-btn').addEventListener('click', () => {
        document.getElementById('new-game-selection').style.display = 'block';
        document.getElementById('import-game-section').style.display = 'none';
    });
    document.getElementById('import-data-btn').addEventListener('click', importGame);

    // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
    document.querySelectorAll('button[data-screen]').forEach(button => {
        button.addEventListener('click', () => {
            switchScreen(button.dataset.screen);
        });
    });
    
    // ãƒ‡ãƒ¼ã‚¿ã‚³ãƒ”ãƒ¼
    document.getElementById('copy-data-button').addEventListener('click', () => {
        const textarea = document.getElementById('export-data-textarea');
        textarea.select();
        document.execCommand('copy');
        const feedback = document.getElementById('copy-feedback');
        feedback.style.opacity = '1';
        setTimeout(() => { feedback.style.opacity = '0'; }, 2000);
    });

    // ãƒ‡ãƒ¼ã‚¿ãƒªã‚»ãƒƒãƒˆ
    document.getElementById('reset-data-btn').addEventListener('click', resetGameData);
}

</script>
</body>
</html>
